[gd_scene load_steps=12 format=3 uid="uid://wpb33gohd6n1"]

[ext_resource type="PackedScene" uid="uid://dr2muauq4tijd" path="res://scenes/player.tscn" id="1_btoec"]
[ext_resource type="PackedScene" uid="uid://djeboigret4lq" path="res://scenes/candycane.tscn" id="2_gwceb"]
[ext_resource type="PackedScene" uid="uid://cnwbmgldjbxaf" path="res://scenes/boundaryTemp.tscn" id="3_l53as"]
[ext_resource type="Script" uid="uid://3plydfi27bmp" path="res://scripts/spawn_holder_slime.gd" id="5_n46q3"]
[ext_resource type="Script" uid="uid://dy5gn03cyk8v7" path="res://scripts/camera_2d.gd" id="6_5ot28"]
[ext_resource type="Script" uid="uid://b23w3mfh8ex6c" path="res://scripts/level_manager.gd" id="6_btoec"]
[ext_resource type="PackedScene" uid="uid://b2dc757t46rfw" path="res://scenes/level_swap.tscn" id="7_gwceb"]
[ext_resource type="Texture2D" uid="uid://hbx21hdxsbub" path="res://assets/sprites/healthbarUnder.png" id="8_08mmt"]
[ext_resource type="Texture2D" uid="uid://cqnhuei2j5uas" path="res://assets/sprites/healthbarProgress.png" id="9_5ot28"]
[ext_resource type="Script" uid="uid://d22wusqsc3ni0" path="res://scripts/playerhealth.gd" id="10_aerfg"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_uwrxv"]

[node name="Level_1" type="Node2D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]
process_priority = 1

[node name="TextureProgressBar" type="TextureProgressBar" parent="CanvasLayer" node_paths=PackedStringArray("player")]
z_index = 2
anchors_preset = -1
anchor_left = -0.087
anchor_top = 0.076
anchor_right = -0.006
anchor_bottom = 0.076
offset_left = -1.77599
offset_top = -6.248
offset_right = -23.088
offset_bottom = 33.752
scale = Vector2(1.55283, 1.55283)
value = 100.0
texture_under = ExtResource("8_08mmt")
texture_progress = ExtResource("9_5ot28")
script = ExtResource("10_aerfg")
player = NodePath("../../player")

[node name="player" parent="." instance=ExtResource("1_btoec")]
position = Vector2(-162, 92)
collision_mask = 255

[node name="candycane" parent="player" instance=ExtResource("2_gwceb")]
position = Vector2(19, 8)

[node name="floor" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="floor"]
position = Vector2(-70, 118)
shape = SubResource("WorldBoundaryShape2D_uwrxv")

[node name="walls" type="Node" parent="."]

[node name="boundary2" parent="walls" instance=ExtResource("3_l53as")]
position = Vector2(38, -17)

[node name="boundary3" parent="walls" instance=ExtResource("3_l53as")]
position = Vector2(-134, -106)
scale = Vector2(20.6867, 1.0855)

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("follow_node")]
position = Vector2(-66.5972, 74.0809)
scale = Vector2(1.43546, 1.43546)
zoom = Vector2(2.995, 2.995)
position_smoothing_enabled = true
script = ExtResource("6_5ot28")
follow_node = NodePath("../player")

[node name="GameManagement" type="Node" parent="."]

[node name="LevelSwap" parent="GameManagement" instance=ExtResource("7_gwceb")]
position = Vector2(16, 66)

[node name="LevelManager" type="Node2D" parent="GameManagement" groups=["level_manager"]]
script = ExtResource("6_btoec")

[node name="Check" type="Timer" parent="GameManagement/LevelManager"]
wait_time = 0.5
autostart = true

[node name="WaveTimer" type="Timer" parent="GameManagement"]
unique_name_in_owner = true
wait_time = 0.6
one_shot = true
autostart = true

[node name="SpawnHolderSLIME" type="Node2D" parent="GameManagement"]
position = Vector2(0, 2)
script = ExtResource("5_n46q3")

[node name="Spawner" type="Node2D" parent="GameManagement/SpawnHolderSLIME" groups=["SLIMEspawners"]]
position = Vector2(109, 121)

[node name="Spawner2" type="Node2D" parent="GameManagement/SpawnHolderSLIME" groups=["SLIMEspawners"]]
position = Vector2(-248, 6)

[node name="Spawner3" type="Node2D" parent="GameManagement/SpawnHolderSLIME" groups=["SLIMEspawners"]]
position = Vector2(-26, 78)

[connection signal="shakescreenplayer" from="player" to="Camera2D" method="_on_player_shakescreenplayer"]
[connection signal="body_entered" from="player/candycane" to="player/candycane" method="attack_enemies"]
[connection signal="enemyShakescreen" from="player/candycane" to="Camera2D" method="_on_candycane_enemy_shakescreen"]
[connection signal="levelSwap" from="GameManagement/LevelManager" to="GameManagement/LevelSwap" method="_on_level_manager_level_swap"]
[connection signal="timeout" from="GameManagement/LevelManager/Check" to="GameManagement/LevelManager" method="_on_check_timeout"]
[connection signal="timeout" from="GameManagement/WaveTimer" to="GameManagement/SpawnHolderSLIME" method="_on_wave_timer_timeout"]
