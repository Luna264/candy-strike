[gd_scene load_steps=29 format=3 uid="uid://wpb33gohd6n1"]

[ext_resource type="PackedScene" uid="uid://deycg7gb1han2" path="res://scenes/player.tscn" id="1_btoec"]
[ext_resource type="Texture2D" uid="uid://ft05d6wkqj0h" path="res://assets/sprites/bgretry.png" id="1_lrvbd"]
[ext_resource type="Script" uid="uid://daaahjgsua4s5" path="res://scripts/control.gd" id="2_aerfg"]
[ext_resource type="PackedScene" uid="uid://djeboigret4lq" path="res://scenes/candycane.tscn" id="2_gwceb"]
[ext_resource type="PackedScene" uid="uid://cnwbmgldjbxaf" path="res://scenes/boundaryTemp.tscn" id="3_l53as"]
[ext_resource type="Texture2D" uid="uid://bulq0wcqo4jsy" path="res://assets/sprites/YOKLES.png" id="5_bgw3c"]
[ext_resource type="Script" uid="uid://3plydfi27bmp" path="res://scripts/spawn_holder_slime.gd" id="5_n46q3"]
[ext_resource type="Texture2D" uid="uid://w6p5tc1ssfsl" path="res://assets/sprites/retryButtonNORMAL..png" id="5_oqlok"]
[ext_resource type="Script" uid="uid://dy5gn03cyk8v7" path="res://scripts/camera_2d.gd" id="6_5ot28"]
[ext_resource type="Texture2D" uid="uid://bkblep1jmlydw" path="res://assets/sprites/retryButtonPRESSED.png" id="6_7nvrk"]
[ext_resource type="Texture2D" uid="uid://dix8dnnj7oodf" path="res://assets/sprites/healthbarUNDER.png" id="6_aerfg"]
[ext_resource type="Script" uid="uid://b23w3mfh8ex6c" path="res://scripts/level_manager.gd" id="6_btoec"]
[ext_resource type="PackedScene" uid="uid://b2dc757t46rfw" path="res://scenes/level_swap.tscn" id="7_gwceb"]
[ext_resource type="Texture2D" uid="uid://bd86ykxxsbxk6" path="res://assets/sprites/retryButtonHOVER..png" id="7_jkxa6"]
[ext_resource type="Texture2D" uid="uid://sboeb1b8nqkl" path="res://assets/sprites/healthbarOVER..png" id="7_nmsli"]
[ext_resource type="Texture2D" uid="uid://biuknu02b437q" path="res://assets/sprites/retryPlayer.png" id="7_oqlok"]
[ext_resource type="Script" uid="uid://cva408nwtvr20" path="res://scripts/playerdeath.gd" id="8_7nvrk"]
[ext_resource type="Script" uid="uid://d22wusqsc3ni0" path="res://scripts/playerhealth.gd" id="10_aerfg"]
[ext_resource type="Script" uid="uid://bxxxkbuwialt3" path="res://scripts/retry.gd" id="11_5ot28"]
[ext_resource type="PackedScene" uid="uid://d4jmbagc8mcv0" path="res://scenes/audio_stream_player_2d.tscn" id="20_jkxa6"]
[ext_resource type="AudioStream" uid="uid://3y2413avn6od" path="res://assets/audio/crit.wav" id="21_w75he"]
[ext_resource type="AudioStream" uid="uid://dry1mjb3pt2rk" path="res://assets/audio/playerhurt.wav" id="22_udfhf"]
[ext_resource type="AudioStream" uid="uid://cohungh0p6eqf" path="res://assets/audio/buttonpress.wav" id="23_i6od7"]

[sub_resource type="Animation" id="Animation_jkxa6"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_oqlok"]
resource_name = "loop"
length = 1.6
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.333333, 0.433333, 0.533333, 0.633333, 0.7, 0.8, 0.866667, 0.933333, 1, 1.1, 1.16667, 1.23333, 1.33333, 1.5, 1.56667),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]
}

[sub_resource type="Animation" id="Animation_7nvrk"]
resource_name = "playerfall"
length = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.0333333, 0.1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [0, 1, 3]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_w75he"]
_data = {
&"RESET": SubResource("Animation_jkxa6"),
&"loop": SubResource("Animation_oqlok"),
&"playerfall": SubResource("Animation_7nvrk")
}

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_uwrxv"]

[node name="Level_1" type="Node2D"]
position = Vector2(-128, 12)

[node name="gui" type="Node" parent="."]

[node name="retry" type="CanvasLayer" parent="gui"]
unique_name_in_owner = true
visible = false

[node name="Control" type="Control" parent="gui/retry"]
custom_minimum_size = Vector2(0, 2.61)
layout_mode = 3
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.506
anchor_bottom = 0.5
offset_left = -6.10352e-05
offset_top = -1.30499
offset_right = -0.00012207
offset_bottom = 1.30499
grow_horizontal = 2
grow_vertical = 2

[node name="TextureRect2" type="TextureRect" parent="gui/retry/Control"]
layout_mode = 0
offset_left = -559.0
offset_top = -282.0
offset_right = 743.0
offset_bottom = 357.0
texture = ExtResource("1_lrvbd")
expand_mode = 1

[node name="TextureRect" type="TextureRect" parent="gui/retry/Control"]
layout_mode = 1
anchors_preset = -1
anchor_left = -7.533
anchor_top = -43.08
anchor_right = 1.0
anchor_bottom = -38.013
offset_left = -296.074
offset_top = -96.2562
offset_right = 311.16
offset_bottom = 270.519
texture = ExtResource("5_bgw3c")

[node name="Sprite2D" type="Sprite2D" parent="gui/retry/Control"]
position = Vector2(54.0001, 20.305)
texture = ExtResource("7_oqlok")
hframes = 30
script = ExtResource("8_7nvrk")

[node name="AnimationPlayer" type="AnimationPlayer" parent="gui/retry/Control/Sprite2D"]
root_node = NodePath("../..")
libraries = {
&"": SubResource("AnimationLibrary_w75he")
}

[node name="wait" type="Timer" parent="gui/retry/Control/Sprite2D"]
one_shot = true

[node name="retry" type="TextureButton" parent="gui/retry/Control"]
layout_mode = 0
offset_left = -313.0
offset_top = 34.305
offset_right = -195.0
offset_bottom = 74.305
scale = Vector2(2.42866, 2.42866)
texture_normal = ExtResource("5_oqlok")
texture_pressed = ExtResource("6_7nvrk")
texture_hover = ExtResource("7_jkxa6")
script = ExtResource("11_5ot28")

[node name="healthbar" type="CanvasLayer" parent="gui"]

[node name="Control" type="Control" parent="gui/healthbar"]
layout_mode = 3
anchors_preset = 0
offset_left = 11.0
offset_top = 13.0
offset_right = 51.0
offset_bottom = 53.0
scale = Vector2(0.80177, 0.80177)
script = ExtResource("2_aerfg")
metadata/_edit_use_anchors_ = true

[node name="TextureProgressBar" type="TextureProgressBar" parent="gui/healthbar/Control" node_paths=PackedStringArray("player")]
layout_mode = 1
anchors_preset = -1
anchor_top = -0.031181
anchor_bottom = -0.031181
offset_right = 114.0
offset_bottom = 73.0
scale = Vector2(3.1876, 3.2145)
texture_under = ExtResource("6_aerfg")
texture_progress = ExtResource("7_nmsli")
script = ExtResource("10_aerfg")
player = NodePath("../../../../player")
metadata/_edit_use_anchors_ = true

[node name="level" type="Node" parent="."]

[node name="LevelSwap" parent="level" instance=ExtResource("7_gwceb")]
position = Vector2(-196, 50)

[node name="LevelManager" type="Node2D" parent="level" groups=["level_manager"]]
script = ExtResource("6_btoec")

[node name="Check" type="Timer" parent="level/LevelManager"]
wait_time = 0.5
autostart = true

[node name="SlimeSpawners" type="Node" parent="level"]

[node name="WaveTimer" type="Timer" parent="level/SlimeSpawners"]
unique_name_in_owner = true
wait_time = 0.6
one_shot = true
autostart = true

[node name="SpawnHolderSLIME" type="Node2D" parent="level/SlimeSpawners"]
position = Vector2(0, 2)
script = ExtResource("5_n46q3")

[node name="Spawner" type="Node2D" parent="level/SlimeSpawners/SpawnHolderSLIME" groups=["SLIMEspawners"]]
position = Vector2(-408, 121)

[node name="Spawner2" type="Node2D" parent="level/SlimeSpawners/SpawnHolderSLIME" groups=["SLIMEspawners"]]
position = Vector2(-264, 118)

[node name="Spawner3" type="Node2D" parent="level/SlimeSpawners/SpawnHolderSLIME" groups=["SLIMEspawners"]]
position = Vector2(-139, 97)

[node name="floor" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="floor"]
position = Vector2(-70, 118)
shape = SubResource("WorldBoundaryShape2D_uwrxv")

[node name="walls" type="Node" parent="."]

[node name="boundary2" parent="walls" instance=ExtResource("3_l53as")]
position = Vector2(-420, 66)

[node name="boundary3" parent="walls" instance=ExtResource("3_l53as")]
position = Vector2(-134, -106)
scale = Vector2(20.6867, 1.0855)

[node name="player" parent="." instance=ExtResource("1_btoec")]
position = Vector2(-237, 104)
scale = Vector2(0.657506, 0.657506)

[node name="candycane" parent="player" instance=ExtResource("2_gwceb")]
position = Vector2(48.6688, 9.1254)

[node name="Camera2D" type="Camera2D" parent="player"]
position = Vector2(1.5209, -41.0643)
rotation = -3.14159
scale = Vector2(13.0643, -1.98949)
zoom = Vector2(2.095, 2.095)
position_smoothing_enabled = true
script = ExtResource("6_5ot28")

[node name="audio" type="Node" parent="."]

[node name="BasicAttack" parent="audio" instance=ExtResource("20_jkxa6")]
unique_name_in_owner = true
position = Vector2(-152, 66)
panning_strength = 0.0
bus = &"BasicAttack"

[node name="CritAttack" parent="audio" instance=ExtResource("20_jkxa6")]
unique_name_in_owner = true
position = Vector2(-126, 12)
stream = ExtResource("21_w75he")
panning_strength = 0.0
bus = &"CritAttack"

[node name="Hurt" parent="audio" instance=ExtResource("20_jkxa6")]
unique_name_in_owner = true
position = Vector2(-127, 17)
stream = ExtResource("22_udfhf")
panning_strength = 0.0
bus = &"Hurt"

[node name="ButtonPress" parent="audio" instance=ExtResource("20_jkxa6")]
unique_name_in_owner = true
position = Vector2(-49, 18)
stream = ExtResource("23_i6od7")
panning_strength = 0.0
bus = &"ButtonPress"

[connection signal="animation_finished" from="gui/retry/Control/Sprite2D/AnimationPlayer" to="gui/retry/Control/Sprite2D" method="_on_animation_player_animation_finished"]
[connection signal="timeout" from="gui/retry/Control/Sprite2D/wait" to="gui/retry/Control/Sprite2D" method="_on_wait_timeout"]
[connection signal="pressed" from="gui/retry/Control/retry" to="gui/retry/Control/retry" method="_on_pressed"]
[connection signal="levelSwap" from="level/LevelManager" to="level/LevelSwap" method="_on_level_manager_level_swap"]
[connection signal="timeout" from="level/LevelManager/Check" to="level/LevelManager" method="_on_check_timeout"]
[connection signal="timeout" from="level/SlimeSpawners/WaveTimer" to="level/SlimeSpawners/SpawnHolderSLIME" method="_on_wave_timer_timeout"]
[connection signal="enemyShakescreen" from="player/candycane" to="player/Camera2D" method="_on_candycane_enemy_shakescreen"]
[connection signal="finished" from="audio/ButtonPress" to="gui/retry/Control/retry" method="_on_button_press_finished"]
